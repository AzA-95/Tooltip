!function(t,e,a){"use strict";function s(t,e,s){var o,i;for(i in o=document.createElement(t),e)e.hasOwnProperty(i)&&o.setAttribute(i,e[i]);return s&&s.appendChild(o),o}var i,n,r,l,h,g,d,o,f,c,p=/Android|iPhone|iPad|iPod|BlackBerry|WPDesktop|IEMobile|Opera Mini/i.test(navigator.userAgent)?"touchend":"mouseup";i=function(t,e,s){t.style.right="";var o=s.right+s.width/2-t.offsetWidth/2;if(o<0||document.body.offsetWidth<=t.offsetWidth)return o=0,e.style.right=s.right+s.width/2+"px",void(t.style.right="0px");e.style.right=s.right-o+s.width/2+"px",t.style.right=o+"px"},n=function(t,e,s,o){e.className=s.mainClassName+"__arrow "+s.mainClassName+"__arrow_bottom",i(t,e,o),t.style.top=window.pageYOffset+o.top-t.offsetHeight-s.offset+"px"},r=function(t,e,s,o){e.className=s.mainClassName+"__arrow "+s.mainClassName+"__arrow_top",i(t,e,o),t.style.top=window.pageYOffset+o.top+o.height+s.offset+"px"},l=function(t,e,s,o){e.className=s.mainClassName+"__arrow "+s.mainClassName+"__arrow_right",d(t,e,s,o)&&(t.style.top=window.pageYOffset+o.top+o.height/2-t.offsetHeight/2+"px")},h=function(t,e,s,o){e.className=s.mainClassName+"__arrow "+s.mainClassName+"__arrow_left",g(t,e,s,o)&&(t.style.top=window.pageYOffset+o.top+o.height/2-t.offsetHeight/2+"px")},g=function(t,e,s,o){t.style.right="";var i=o.right-t.offsetWidth-s.offset;return i<0&&(i=o.right+o.width+s.offset,e.className=s.mainClassName+"__arrow "+s.mainClassName+"__arrow_right"),o.width+t.offsetWidth>=document.body.clientWidth?(0<o.top-s.offset-t.offsetHeight?n(t,e,s,o):r(t,e,s,o),!1):(t.style.right=i+"px",!0)},d=function(t,e,s,o){var i;return t.style.right="",i=o.right+o.width+s.offset,e.className=s.mainClassName+"__arrow "+s.mainClassName+"__arrow_right",o.width+t.offsetWidth>=document.body.clientWidth?(0<o.top-s.offset-t.offsetHeight?n(t,e,s,o):r(t,e,s,o),!1):(t.style.right=i+"px",!0)},o=function(t,e,s,o){var i=function(t){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,right:document.body.offsetWidth-e.right,bottom:window.innerHeight-e.bottom,width:e.width,height:e.height}}(t);s.style.cssText="","right"!==o.position?"left"!==o.position?"top"!==o.position?"bottom"!==o.position||(i.top+i.height+o.offset+e.offsetHeight<window.innerHeight?r(e,s,o,i):n(e,s,o,i)):0<i.top-o.offset-e.offsetHeight?n(e,s,o,i):i.top-o.offset+e.offsetHeight+t.offsetHeight>document.body.scrollHeight-window.pageYOffset?n(e,s,o,i):r(e,s,o,i):l(e,s,o,i):h(e,s,o,i)},(f=function(t){this.values={},this.values.triggerClose=!1,this.values.mainClassName=t,this.tags={},this.tags.tooltip=s("div",{class:t}),this.tags.tooltip__arrow=s("div",{class:t+"__arrow"},this.tags.tooltip),this.tags.tooltip__section=s("div",{class:t+"__section"},this.tags.tooltip),this.tags.tooltip__close=s("div",{class:t+"__close"},this.tags.tooltip__section),this.tags.tooltip__text=s("div",{class:t+"__text"},this.tags.tooltip__section)}).prototype={constructor:f,init:function(t,e){return t&&(this.tags.element=t,e=e||{},this.opts=function(t,e){var s;for(s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}({modClass:"",offset:5,close:!0,position:"top"},e),this.opts.mainClassName=this.values.mainClassName,this.events()),this},events:function(){var e=this;e.opts.close?e.tags.tooltip__close.style.display="block":e.tags.tooltip__close.style.display="none",this.tags.tooltip__close.addEventListener(p,function(t){t.stopPropagation(),e.close()})},html:function(t){return this.tags.element&&(this.tags.tooltip__text.innerHTML=t),this},show:function(){if(!this.tags.element)return this;function t(){this.opts.modClass&&this.tags.tooltip.classList.add(this.opts.modClass),document.body.insertBefore(this.tags.tooltip,document.body.firstChild),o(this.tags.element,this.tags.tooltip,this.tags.tooltip__arrow,this.opts),window.addEventListener("resize",function(){o(e.tags.element,e.tags.tooltip,e.tags.tooltip__arrow,e.opts)}),setTimeout(function(){e.tags.tooltip.classList.add("active")},10),this.values.triggerClose=!0}var e=this,s=this.tags.tooltip__text.querySelectorAll("img");return s.length?$(s).on("load",function(){t.call(e)}):t.call(e),this},updatePosition:function(){return this.tags.element&&o(this.tags.element,this.tags.tooltip,this.tags.tooltip__arrow,this.opts),this},close:function(){if(!this.tags.element)return this;var t=this;return this.values.triggerClose?(this.tags.tooltip.classList.remove("active"),setTimeout(function(){t.opts.modClass&&t.tags.tooltip.classList.remove(t.opts.modClass),document.body.removeChild(t.tags.tooltip)},200),this.values.triggerClose=!1,this):void 0}},t.Tooltip=f,c=function(){var s,o,i;o=new f("tooltip"),document.body.addEventListener("mouseenter",function(e){e.target.matches(a)&&(s=setTimeout(function(){var t={modClass:e.target.getAttribute("data-modclass")||"",position:e.target.getAttribute("data-pos")||"top",event:e.target.getAttribute("data-event")||"hover",offset:parseInt(e.target.getAttribute("data-offset"))||5,close:!1};"hover"===t.event&&o.init(e.target,t).html(e.target.getAttribute("data-text")).show()},300))},!0),document.body.addEventListener("mouseleave",function(t){t.target.matches(a)&&(clearTimeout(s),"hover"!==t.target.getAttribute("data-event")&&t.target.getAttribute("data-event")||o.close())},!0),document.body.addEventListener("touchstart",function(){i=!1}),document.body.addEventListener("touchmove",function(){i=!0}),document.body.addEventListener(p,function(t){if(!i)if(t.target.matches(a)){if(t.preventDefault(),"click"===t.target.getAttribute("data-event")||"touchend"==p){var e={modClass:t.target.getAttribute("data-modclass")||"",position:t.target.getAttribute("data-pos")||"top",offset:parseInt(t.target.getAttribute("data-offset"))||5,close:!0};o.init(t.target,e).html(t.target.getAttribute("data-text")).show()}}else o.close()},!0)},document.addEventListener("DOMContentLoaded",c)}(window,0,"[data-tooltip]");